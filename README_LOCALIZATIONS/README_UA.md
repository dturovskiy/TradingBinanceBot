# ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∏–π –¢–æ—Ä–≥–æ–≤–∏–π –ë–æ—Ç –¥–ª—è Binance

–¶–µ–π –ø—Ä–æ—î–∫—Ç —î –±–∞–≥–∞—Ç–æ—Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–º —Ç–æ—Ä–≥–æ–≤–∏–º –±–æ—Ç–æ–º –¥–ª—è –±—ñ—Ä–∂—ñ Binance, —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∏–º –Ω–∞ Python. –ë–æ—Ç –º–∞—î –º–æ–¥—É–ª—å–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É —ñ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó —Ç–æ—Ä–≥–æ–≤–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥—ñ–π, —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Ä–∏–Ω–∫—É. –í—ñ–Ω –ø—ñ–¥—Ç—Ä–∏–º—É—î —è–∫ —Ä–µ–∞–ª—å–Ω—É —Ç–æ—Ä–≥—ñ–≤–ª—é (Mainnet), —Ç–∞–∫ —ñ –±–µ–∑–ø–µ—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ Binance Testnet.

## üöÄ –û—Å–Ω–æ–≤–Ω—ñ –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- üìà **–ö–æ–º–ø–ª–µ–∫—Å–Ω–µ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –£–≥–æ–¥–∞–º–∏:** Take Profit, Stop Loss —Ç–∞ Hard Stop Loss.
    
- üìä **–¢–µ—Ö–Ω—ñ—á–Ω–∏–π –ê–Ω–∞–ª—ñ–∑ (TA):** –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —Å–∏–≥–Ω–∞–ª—ñ–≤ —á–µ—Ä–µ–∑ RSI —Ç–∞ Moving Averages.
    
- ‚öñÔ∏è **–†–µ–±–∞–ª–∞–Ω—Å—É–≤–∞–Ω–Ω—è —Ç–∞ –ö—É–ø—ñ–≤–ª—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∫—É–ø—ñ–≤–ª—è –∞–∫—Ç–∏–≤—ñ–≤ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó "RSI Oversold".
    
- üîÑ **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ API:** –ì–Ω—É—á–∫–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Spot API –¥–ª—è –∫–ª–∞—Å–∏—á–Ω–æ—ó —Ç–æ—Ä–≥—ñ–≤–ª—ñ —Ç–∞ Convert API –¥–ª—è —É–≥–æ–¥ –±–µ–∑ –∫–æ–º—ñ—Å—ñ–π.
    
- üåê **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –¢–µ—Å—Ç–Ω–µ—Ç—É:** –ü–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ —Ç–µ—Å—Ç–æ–≤–∏–º —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ–º Binance.
    
- üîî **–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –≤ Telegram:** –ú–∏—Ç—Ç—î–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –≤—Å—ñ –∫–ª—é—á–æ–≤—ñ –ø–æ–¥—ñ—ó.
    
- ‚öôÔ∏è **–ì–Ω—É—á–∫–∞ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:** –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ JSON-—Ñ–∞–π–ª–∏ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –±–æ—Ç–∞.
    
- üóÇÔ∏è **–ú–æ–¥—É–ª—å–Ω–∞ –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:** –ß—ñ—Ç–∫–µ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –∫–æ–¥—É –Ω–∞ –ª–æ–≥—ñ—á–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏.
    
- ‚úçÔ∏è **–î–µ—Ç–∞–ª—å–Ω–µ –õ–æ–≥—É–≤–∞–Ω–Ω—è:** –†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –ª–æ–≥—ñ–≤ –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω—ñ, —Ç–æ—Ä–≥–æ–≤—ñ —Ç–∞ –∑–≤—ñ—Ç–∏ –ø–æ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.
    
- üîí **–¢–∏–ø–æ–±–µ–∑–ø–µ–∫–∞ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π:** –ì–∞—Ä–∞–Ω—Ç—ñ—è —Ç–æ—á–Ω–æ—Å—Ç—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤ –∑–∞–≤–¥—è–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—é —Ç–∏–ø—É `Decimal`.

- üõ°Ô∏è **–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫:** –¢—Ä–∏—Ä—ñ–≤–Ω–µ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º retry, Circuit Breaker —Ç–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥–æ–º —è–∫–æ—Å—Ç—ñ.
    

## üìÑ –ì–∞–π–¥–ª–∞–π–Ω –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤

–¶–µ–π –ø—Ä–æ—î–∫—Ç –¥–æ—Ç—Ä–∏–º—É—î—Ç—å—Å—è —Å—Ç—Ä–æ–≥–∏—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ñ–≤ —Ä–æ–∑—Ä–æ–±–∫–∏ –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ —Ç–∞ —Ç–æ—á–Ω–æ—Å—Ç—ñ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π.

- [**–ü—Ä–∞–≤–∏–ª–∞ —Ä–æ–∑—Ä–æ–±–∫–∏ (—Ç–∏–ø–æ–±–µ–∑–ø–µ–∫–∞, Decimal, —Ç–µ—Å—Ç–∏)**](/docs/DEVELOPMENT_GUIDELINES.md)

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ—î–∫—Ç—É

```yaml
BinanceBot/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ api_keys.json.example       # –ü—Ä–∏–∫–ª–∞–¥ —Ñ–∞–π–ª—É –¥–ª—è –∫–ª—é—á—ñ–≤ API
‚îÇ   ‚îú‚îÄ‚îÄ config.json                 # –û—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
‚îÇ   ‚îî‚îÄ‚îÄ error_code_reference.json   # –ú–∞–ø–∞ –∫–æ–¥—ñ–≤ –ø–æ–º–∏–ª–æ–∫
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ testnet/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ positions.json          # –ü–æ—Ç–æ—á–Ω—ñ –ø–æ–∑–∏—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ illiquid_positions.json # –ù–µ–ª—ñ–∫–≤—ñ–¥–Ω—ñ –∞–∫—Ç–∏–≤–∏ (blacklist)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ exchange_info_cache.json
‚îÇ   ‚îî‚îÄ‚îÄ mainnet/
‚îú‚îÄ‚îÄ logs/
‚îÇ   ‚îú‚îÄ‚îÄ testnet/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ activity.log            # –°–∏—Å—Ç–µ–º–Ω—ñ –ø–æ–¥—ñ—ó
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ trades.log              # –¢–æ—Ä–≥–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ performance.log         # –ó–≤—ñ—Ç–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ
‚îÇ   ‚îî‚îÄ‚îÄ mainnet/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ binance_api_client.py       # –í–∑–∞—î–º–æ–¥—ñ—è –∑ Binance API
‚îÇ   ‚îú‚îÄ‚îÄ circuit_breaker.py          # Circuit Breaker –¥–ª—è —Å–∏–º–≤–æ–ª—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ config_loader.py            # –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
‚îÇ   ‚îú‚îÄ‚îÄ data_manager.py             # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥–∞–Ω–∏–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ error_constants.py          # –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∏ –ø–æ–º–∏–ª–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ error_handler.py            # –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–º–∏–ª–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ illiquid_manager.py         # API —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –Ω–µ–ª—ñ–∫–≤—ñ–¥–Ω–∏–º–∏ –∞–∫—Ç–∏–≤–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ main_bot.py                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É, –æ—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ strategies/                 # –ö–∞—Ç–∞–ª–æ–≥ –∑—ñ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ ta_calculator.py            # –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤
‚îÇ   ‚îú‚îÄ‚îÄ telegram_notifier.py        # –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –≤ Telegram
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ retry.py                # –£—Ç–∏–ª—ñ—Ç–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö —Å–ø—Ä–æ–±
‚îÇ       ‚îî‚îÄ‚îÄ sanitizer.py            # –°–∞–Ω—ñ—Ç–∏–∑–∞—Ü—ñ—è —á—É—Ç–ª–∏–≤–∏—Ö –¥–∞–Ω–∏—Ö
‚îú‚îÄ‚îÄ tools/
‚îÇ   ‚îú‚îÄ‚îÄ validate_error_map.py       # –í–∞–ª—ñ–¥–∞—Ç–æ—Ä –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –ø–æ–º–∏–ª–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ illiquid_position_manager.py # CLI –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è blacklist
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ test_circuit_breaker.py     # –¢–µ—Å—Ç–∏ Circuit Breaker
‚îÇ   ‚îú‚îÄ‚îÄ test_error_handler.py       # –¢–µ—Å—Ç–∏ –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ test_error_mapping.py       # –¢–µ—Å—Ç–∏ –∫–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
‚îÇ   ‚îú‚îÄ‚îÄ test_integration.py         # –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ test_metrics.py             # –¢–µ—Å—Ç–∏ –º–µ—Ç—Ä–∏–∫ —è–∫–æ—Å—Ç—ñ
‚îÇ   ‚îú‚îÄ‚îÄ test_retry.py               # –¢–µ—Å—Ç–∏ retry –º–µ—Ö–∞–Ω—ñ–∑–º—É
‚îÇ   ‚îú‚îÄ‚îÄ test_sanitizer.py           # –¢–µ—Å—Ç–∏ —Å–∞–Ω—ñ—Ç–∏–∑–∞—Ü—ñ—ó
‚îÇ   ‚îî‚îÄ‚îÄ test_throttling.py          # –¢–µ—Å—Ç–∏ Telegram throttling
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ requirements-dev.txt
‚îî‚îÄ‚îÄ start_bot.sh
```

## üõ†Ô∏è –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

**–ö—Ä–æ–∫ 1: –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é**

```bash
git clone <URL_–í–ê–®–û–ì–û_–†–ï–ü–û–ó–ò–¢–û–†–Ü–Æ>
cd BinanceBot
```

**–ö—Ä–æ–∫ 2: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π** 

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ —É –∫–æ—Ä–µ–Ω–µ–≤—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —Å—Ç–≤–æ—Ä–µ–Ω–æ —Ñ–∞–π–ª–∏:

```bash
pip install -r requirements.txt
pip install -r requirements-dev.txt  # –î–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏ —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
```

**–ö—Ä–æ–∫ 3: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API –∫–ª—é—á—ñ–≤** 

–°—Ç–≤–æ—Ä—ñ—Ç—å API –∫–ª—é—á—ñ —É Binance –∑ –¥–æ–∑–≤–æ–ª–∞–º–∏ `Enable Reading` —Ç–∞ `Enable Spot & Margin Trading`. **–ù–ï** –≤–º–∏–∫–∞–π—Ç–µ `Enable Withdrawals`. –°–∫–æ–ø—ñ—é–π—Ç–µ `config/api_keys.json.example` —É `config/api_keys.json` —Ç–∞ –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –≤–∞—à–∏–º–∏ –∫–ª—é—á–∞–º–∏.

**–ö—Ä–æ–∫ 4: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó** 

–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `config/config.json` —Ç–∞ `config/strategy.json` –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –±–æ—Ç–∞.

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –ë–æ—Ç–∞

- –î–ª—è Mainnet:

`bash ./start_bot.sh`

- –î–ª—è Testnet: 

`bash ./start_bot.sh --testnet`

---

## ‚ö†Ô∏è –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

–ë–æ—Ç —Ä–µ–∞–ª—ñ–∑—É—î –∫–æ–º–ø–ª–µ–∫—Å–Ω—É —Ç—Ä–∏—Ä—ñ–≤–Ω–µ–≤—É —Å–∏—Å—Ç–µ–º—É –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫ –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó –Ω–∞–¥—ñ–π–Ω–æ—Å—Ç—ñ —Ç–∞ —Å—Ç—ñ–π–∫–æ—Å—Ç—ñ.

### 1. –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

- **–†—ñ–≤–µ–Ω—å API-–∫–ª—ñ—î–Ω—Ç–∞ (`src/binance_api_client.py`):**   
  –ü–µ—Ä–µ—Ö–æ–ø–ª—é—î –±—É–¥—å-—è–∫—ñ –≤–∏–Ω—è—Ç–∫–∏ –≤—ñ–¥ API —Ç–∞ –ø–µ—Ä–µ–¥–∞—î —ó—Ö –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–π —Ä—ñ–≤–µ–Ω—å.
    
- **–†—ñ–≤–µ–Ω—å –æ–±—Ä–æ–±–Ω–∏–∫–∞ (`src/error_handler.py`):**   
  –ê–Ω–∞–ª—ñ–∑—É—î –≤–∏–Ω—è—Ç–æ–∫, –∫–ª–∞—Å–∏—Ñ—ñ–∫—É—î –π–æ–≥–æ –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—î—é (RATE_LIMIT, TRADE_LOGIC_ERROR —Ç–æ—â–æ) —Ç–∞ –ø–æ–≤–µ—Ä—Ç–∞—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω–∏–π –æ–±'—î–∫—Ç `ErrorDetails`.
    
- **–†—ñ–≤–µ–Ω—å —Ä–µ–∞–≥—É–≤–∞–Ω–Ω—è (`main_bot.py`):**   
  –ü—Ä–∏–π–º–∞—î —Ñ—ñ–Ω–∞–ª—å–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –ø–æ–º–∏–ª–∫–∏: –≤–∏–∫–æ–Ω–∞—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω—É —Å–ø—Ä–æ–±—É, –ø–æ–∑–Ω–∞—á–∏—Ç–∏ –∞–∫—Ç–∏–≤ —è–∫ –Ω–µ–ª—ñ–∫–≤—ñ–¥–Ω–∏–π –∞–±–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –∑—É–ø–∏–Ω–∏—Ç–∏ –±–æ—Ç–∞.

### 2. –ñ–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª –ø–æ–º–∏–ª–∫–∏

```mermaid
sequenceDiagram
    participant main_bot as –ì–æ–ª–æ–≤–Ω–∏–π —Ü–∏–∫–ª
    participant retry_util as –£—Ç–∏–ª—ñ—Ç–∞ Retry
    participant api_client as API –ö–ª—ñ—î–Ω—Ç
    participant error_handler as –û–±—Ä–æ–±–Ω–∏–∫ –ø–æ–º–∏–ª–æ–∫
    main_bot->>retry_util: retry_with_backoff(api_call)
    retry_util->>api_client: –í–∏–∫–ª–∏–∫ API-—Ñ—É–Ω–∫—Ü—ñ—ó
    api_client-->>error_handler: –°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ (Exception)
    error_handler-->>api_client: –ü–æ–≤–µ—Ä—Ç–∞—î ErrorDetails
    api_client-->>retry_util: –ü–æ–≤–µ—Ä—Ç–∞—î BotResponse(status="error")
    alt –ü–æ–º–∏–ª–∫–∞ –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω–∞ (retryable=true)
        retry_util->>retry_util: –ï–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–π–Ω–∞ –∑–∞—Ç—Ä–∏–º–∫–∞
        retry_util->>api_client: –ü–æ–≤—Ç–æ—Ä–Ω–∏–π –≤–∏–∫–ª–∏–∫
    end
    retry_util-->>main_bot: –ü–æ–≤–µ—Ä—Ç–∞—î —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π BotResponse(status="error")
    main_bot->>main_bot: handle_final_error()
```

### 3. Circuit Breaker (–ó–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è —Ü–∏–∫–ª—ñ—á–Ω–∏–º –∑–±–æ—è–º)

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –±–ª–æ–∫—É—î —Å–∏–º–≤–æ–ª–∏, —è–∫—ñ –≥–µ–Ω–µ—Ä—É—é—Ç—å –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω—ñ –ø–æ–º–∏–ª–∫–∏, —â–æ–± –∑–∞–ø–æ–±—ñ–≥—Ç–∏ –±–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–∏–º –Ω–µ–≤–¥–∞–ª–∏–º —Å–ø—Ä–æ–±–∞–º —Ç–æ—Ä–≥—ñ–≤–ª—ñ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `FAILURE_THRESHOLD = 3` - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫ –¥–æ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è
- `COOLDOWN_PERIOD = 300` —Å–µ–∫—É–Ω–¥ (5 —Ö–≤–∏–ª–∏–Ω) - —á–∞—Å –±–ª–æ–∫—É–≤–∞–Ω–Ω—è
- `WINDOW_SIZE = 300` —Å–µ–∫—É–Ω–¥ - —á–∞—Å–æ–≤–µ –≤—ñ–∫–Ω–æ –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É –ø–æ–º–∏–ª–æ–∫

**–ü—Ä–∏–∫–ª–∞–¥:**
```
–°–∏–º–≤–æ–ª BTCUSDT ‚Üí 3 –ø–æ–º–∏–ª–∫–∏ LOT_SIZE –∑–∞ 5 —Ö–≤–∏–ª–∏–Ω
‚Üí Circuit Breaker TRIPPED
‚Üí –°–∏–º–≤–æ–ª –ø—Ä–æ–ø—É—Å–∫–∞—î—Ç—å—Å—è –Ω–∞—Å—Ç—É–ø–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω
‚Üí –ü—ñ—Å–ª—è cooldown –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑–±–ª–æ–∫–æ–≤—É—î—Ç—å—Å—è
```

---

## üö´ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –Ω–µ–ª—ñ–∫–≤—ñ–¥–Ω–∏–º–∏ –ø–æ–∑–∏—Ü—ñ—è–º–∏

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –Ω–µ–ª—ñ–∫–≤—ñ–¥–Ω–∏–º–∏ –∞–∫—Ç–∏–≤–∞–º–∏ —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –¥–≤–æ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤:

### 1. API (`src/illiquid_manager.py`)

–ü—Ä–æ–≥—Ä–∞–º–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è:

```python
from src.illiquid_manager import (
    add_illiquid_position,
    remove_illiquid_position,
    is_illiquid,
    get_illiquid_positions
)

# –î–æ–¥–∞—Ç–∏ —Å–∏–º–≤–æ–ª –¥–æ blacklist
add_illiquid_position("BTCUSDT", "Circuit Breaker: 3 trade logic errors")

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –≤ blacklist
if is_illiquid("BTCUSDT"):
    print("–°–∏–º–≤–æ–ª –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–æ")

# –í–∏–¥–∞–ª–∏—Ç–∏ –∑ blacklist
remove_illiquid_position("BTCUSDT")

# –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω—ñ
positions = get_illiquid_positions()
```

### 2. CLI (`tools/illiquid_position_manager.py`)

–Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è:

```bash
# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ –Ω–µ–ª—ñ–∫–≤—ñ–¥–Ω—ñ –ø–æ–∑–∏—Ü—ñ—ó
python tools/illiquid_position_manager.py --list

# –î–æ–¥–∞—Ç–∏ —Å–∏–º–≤–æ–ª –¥–æ blacklist
python tools/illiquid_position_manager.py --add BTCUSDT --reason "Manual block"

# –í–∏–¥–∞–ª–∏—Ç–∏ —Å–∏–º–≤–æ–ª
python tools/illiquid_position_manager.py --remove BTCUSDT

# –û—á–∏—Å—Ç–∏—Ç–∏ –≤–µ—Å—å —Å–ø–∏—Å–æ–∫
python tools/illiquid_position_manager.py --clear
```

**–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Circuit Breaker:**

–ö–æ–ª–∏ Circuit Breaker trip, —Å–∏–º–≤–æ–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—î—Ç—å—Å—è –¥–æ `illiquid_positions.json` —ñ –ø—Ä–æ–ø—É—Å–∫–∞—î—Ç—å—Å—è –≤ –≥–æ–ª–æ–≤–Ω–æ–º—É —Ü–∏–∫–ª—ñ:

```
Circuit Breaker TRIPPED (BTCUSDT)
‚Üí add_illiquid_position("BTCUSDT", "CB: 3 errors")
‚Üí –ì–æ–ª–æ–≤–Ω–∏–π —Ü–∏–∫–ª –ø–µ—Ä–µ–≤—ñ—Ä—è—î is_illiquid()
‚Üí –°–∏–º–≤–æ–ª –ø—Ä–æ–ø—É—Å–∫–∞—î—Ç—å—Å—è –¥–æ —Ä—É—á–Ω–æ–≥–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è
```

---

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —è–∫–æ—Å—Ç—ñ (4 SLA –º–µ—Ç—Ä–∏–∫–∏)

–°–∏—Å—Ç–µ–º–∞ –≤—ñ–¥—Å—Ç–µ–∂—É—î 4 –∫–ª—é—á–æ–≤—ñ –º–µ—Ç—Ä–∏–∫–∏ —è–∫–æ—Å—Ç—ñ –∑–≥—ñ–¥–Ω–æ –∑—ñ –°—Ç—Ä–∞—Ç–µ–≥—ñ—î—é v10:

### 1. **Retry Success Rate** (–¶—ñ–ª—å: >70%)

**–§–æ—Ä–º—É–ª–∞:** `(–£—Å–ø—ñ—à–Ω—ñ retry) / (–í—Å—ñ retry) √ó 100%`

**–©–æ –ø–æ–∫–∞–∑—É—î:** –°–∫—ñ–ª—å–∫–∏ –ø–æ–º–∏–ª–æ–∫ –≤—ñ–¥–Ω–æ–≤–∏–ª–∏—Å—è –∑–∞–≤–¥—è–∫–∏ –º–µ—Ö–∞–Ω—ñ–∑–º—É –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö —Å–ø—Ä–æ–±.

**–ü—Ä–∏–∫–ª–∞–¥:**
```
10 –ø–æ–º–∏–ª–æ–∫ –∑ retry ‚Üí 7 —É—Å–ø—ñ—à–Ω–æ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–æ = 70% ‚úÖ
```

**–Ø–∫ –ø–æ–∫—Ä–∞—â–∏—Ç–∏ —è–∫—â–æ <70%:**
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ Binance API
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è `MAX_RETRIES` (–º–∞—î –±—É—Ç–∏ 5)
- –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–π—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç non-retryable –ø–æ–º–∏–ª–æ–∫

---

### 2. **Circuit Breaker Trip Rate** (–¶—ñ–ª—å: <5%)

**–§–æ—Ä–º—É–ª–∞:** `(–ö—ñ–ª—å–∫—ñ—Å—Ç—å CB trips) / (–í—Å—ñ —Ç–æ—Ä–≥–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó) √ó 100%`

**–©–æ –ø–æ–∫–∞–∑—É—î:** –Ø–∫ —á–∞—Å—Ç–æ Circuit Breaker –±–ª–æ–∫—É—î —Å–∏–º–≤–æ–ª–∏ —á–µ—Ä–µ–∑ –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω—ñ –ø–æ–º–∏–ª–∫–∏.

**–ü—Ä–∏–∫–ª–∞–¥:**
```
100 —Ç–æ—Ä–≥–æ–≤–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π ‚Üí 2 CB trips = 2% ‚úÖ
```

**–Ø–∫ –ø–æ–∫—Ä–∞—â–∏—Ç–∏ —è–∫—â–æ >5%:**
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —è–∫—ñ—Å—Ç—å —Ç–æ—Ä–≥–æ–≤–∏—Ö —Å–∏–≥–Ω–∞–ª—ñ–≤
- –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ (LOT_SIZE, MIN_NOTIONAL)
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ illiquid blacklist –Ω–∞ –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ –∑–∞–ø–∏—Å–∏
- –†–æ–∑–≥–ª—è–Ω—å—Ç–µ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è `FAILURE_THRESHOLD`

---

### 3. **Fallback Classification Rate** (–¶—ñ–ª—å: <20%)

**–§–æ—Ä–º—É–ª–∞:** `(–ü–æ–º–∏–ª–∫–∏ –∑ via_fallback=True) / (–í—Å—ñ –ø–æ–º–∏–ª–∫–∏) √ó 100%`

**–©–æ –ø–æ–∫–∞–∑—É—î:** –í—ñ–¥—Å–æ—Ç–æ–∫ –ø–æ–º–∏–ª–æ–∫, —è–∫—ñ –Ω–µ –±—É–ª–∏ –∑–Ω–∞–π–¥–µ–Ω—ñ –≤ `error_code_reference.json` —ñ –∫–ª–∞—Å–∏—Ñ—ñ–∫–æ–≤–∞–Ω—ñ —á–µ—Ä–µ–∑ fallback –º–µ—Ö–∞–Ω—ñ–∑–º.

**–ü—Ä–∏–∫–ª–∞–¥:**
```
100 –ø–æ–º–∏–ª–æ–∫ ‚Üí 15 —á–µ—Ä–µ–∑ fallback = 15% ‚úÖ
```

**–Ø–∫ –ø–æ–∫—Ä–∞—â–∏—Ç–∏ —è–∫—â–æ >20%:**
- –ó–Ω–∞–π–¥—ñ—Ç—å –≤ –ª–æ–≥–∞—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ `via_fallback=True`
- –î–æ–¥–∞–π—Ç–µ –Ω–æ–≤—ñ –∫–æ–¥–∏ –ø–æ–º–∏–ª–æ–∫ –≤ `config/error_code_reference.json`
- –†–æ–∑—à–∏—Ä—Ç–µ Regex Map –¥–ª—è —Ç–∏–ø–æ–≤–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

---

### 4. **Critical Stops** (–¶—ñ–ª—å: 0)

**–§–æ—Ä–º—É–ª–∞:** –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ–¥—ñ–π `CriticalBotStopError`

**–©–æ –ø–æ–∫–∞–∑—É—î:** –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –∑—É–ø–∏–Ω–æ–∫ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ `AUTH_ERROR_CRITICAL`.

**–ü—Ä–∏–∫–ª–∞–¥:**
```
0 –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –∑—É–ø–∏–Ω–æ–∫ –∑–∞ —Ç–∏–∂–¥–µ–Ω—å = ‚úÖ –¶–Ü–õ–¨ –î–û–°–Ø–ì–ù–£–¢–ê
```

**–Ø–∫—â–æ >0:**
- –ù–ï–ì–ê–ô–ù–û –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å `üõë –ó—É–ø–∏–Ω–∫–∞ –±–æ—Ç–∞`
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–∞–ª—ñ–¥–Ω—ñ—Å—Ç—å API –∫–ª—é—á—ñ–≤
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ IP whitelist –Ω–∞ Binance
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É API –∫–ª—é—á—ñ–≤

---

### –Ø–∫ —Ä–æ–∑—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫:**

```bash
# –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –≤—Å—ñ—Ö 4 –º–µ—Ç—Ä–∏–∫ –∑ –ª–æ–≥—ñ–≤
python tools/calculate_metrics.py

# –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–≤–æ–¥—É:
# ‚úÖ Retry Success Rate: 72% (>70%)
# ‚úÖ CB Trip Rate: 3% (<5%)
# ‚ö†Ô∏è Fallback Rate: 23% (>20% - –ø–æ—Ç—Ä—ñ–±–Ω–∞ —É–≤–∞–≥–∞!)
# ‚úÖ Critical Stops: 0
```

**–ß–∞—Å—Ç–æ—Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:**
- **–©–æ—Ç–∏–∂–Ω—è:** –î–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Ç–µ–Ω–¥–µ–Ω—Ü—ñ–π
- **–ü—Ä–∏ –∞–Ω–æ–º–∞–ª—ñ—è—Ö:** –ù–µ–≥–∞–π–Ω–æ –ø—Ä–∏ –Ω–µ–∑–≤–∏—á–Ω—ñ–π –ø–æ–≤–µ–¥—ñ–Ω—Ü—ñ
- **–ü—ñ—Å–ª—è –∑–º—ñ–Ω:** –ó–∞–≤–∂–¥–∏ –ø—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–ü—Ä–æ—î–∫—Ç –º–∞—î –∫–æ–º–ø–ª–µ–∫—Å–Ω—É —Å–∏—Å—Ç–µ–º—É —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ –ø–æ–∫—Ä–∏—Ç—Ç—è–º >70%.

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤

```bash
# –ó–∞–ø—É—Å–∫ —É—Å—ñ—Ö —Ç–µ—Å—Ç—ñ–≤
./run_tests.sh

# –ó–∞–ø—É—Å–∫ –∑ coverage –∑–≤—ñ—Ç–æ–º
pytest --cov=src --cov-report=term-missing

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç-—Ñ–∞–π–ª—É
pytest tests/test_error_handler.py -v

# –ó–∞–ø—É—Å–∫ –∑ –¥–µ—Ç–∞–ª—å–Ω–∏–º –≤–∏–≤–æ–¥–æ–º
pytest tests/ -v --tb=short
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç—ñ–≤

```bash
tests/
‚îú‚îÄ‚îÄ test_circuit_breaker.py      # Circuit Breaker (17 —Ç–µ—Å—Ç—ñ–≤)
‚îú‚îÄ‚îÄ test_error_handler.py        # ErrorHandler (27 —Ç–µ—Å—Ç—ñ–≤)
‚îú‚îÄ‚îÄ test_error_mapping.py        # –ö–ª–∞—Å–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø–æ–º–∏–ª–æ–∫ (10 —Ç–µ—Å—Ç—ñ–≤)
‚îú‚îÄ‚îÄ test_integration.py          # End-to-end flows (8 —Ç–µ—Å—Ç—ñ–≤)
‚îú‚îÄ‚îÄ test_metrics.py              # SLA –º–µ—Ç—Ä–∏–∫–∏ (18 —Ç–µ—Å—Ç—ñ–≤)
‚îú‚îÄ‚îÄ test_retry.py                # Retry Engine (19 —Ç–µ—Å—Ç—ñ–≤)
‚îú‚îÄ‚îÄ test_sanitizer.py            # –°–∞–Ω—ñ—Ç–∏–∑–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö (22 —Ç–µ—Å—Ç–∏)
‚îú‚îÄ‚îÄ test_throttling.py           # Telegram throttling (9 —Ç–µ—Å—Ç—ñ–≤)
‚îî‚îÄ‚îÄ test_type_safety.py          # –¢–∏–ø–æ–±–µ–∑–ø–µ–∫–∞ (3 —Ç–µ—Å—Ç–∏)
```

**–í—Å—å–æ–≥–æ:** 130+ —Ç–µ—Å—Ç—ñ–≤, –ø–æ–∫—Ä–∏—Ç—Ç—è >70%

### –ü–æ–∫—Ä–∏—Ç—Ç—è –∫–æ–¥—É (Coverage)

**–¶—ñ–ª—å–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è:**
- `error_handler.py`: ‚â•80%
- `retry.py`: ‚â•80%
- `circuit_breaker.py`: ‚â•70%
- `illiquid_manager.py`: ‚â•70%

**–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è HTML –∑–≤—ñ—Ç—É:**

```bash
pytest --cov=src --cov-report=html
# –í—ñ–¥–∫—Ä–∏–π—Ç–µ htmlcov/index.html —É –±—Ä–∞—É–∑–µ—Ä—ñ
```

### –í–∏–º–æ–≥–∏ –¥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

- **Python:** 3.8+
- **–ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:** `requirements-dev.txt`

```bash
pip install -r requirements-dev.txt
```

**–û—Å–Ω–æ–≤–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –¥–ª—è —Ç–µ—Å—Ç—ñ–≤:**
- `pytest` - —Ç–µ—Å—Ç–æ–≤–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- `pytest-cov` - coverage –∑–≤—ñ—Ç–∏
- `pytest-snapshot` - snapshot —Ç–µ—Å—Ç–∏
- `freezegun` - –º–æ–∫ —á–∞—Å—É

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–Ω—ñ–ø—à–æ—Ç—ñ–≤

–Ø–∫—â–æ –≤–∏ —Å–≤—ñ–¥–æ–º–æ –∑–º—ñ–Ω–∏–ª–∏ –ª–æ–≥—ñ–∫—É, —è–∫–∞ –≤–ø–ª–∏–≤–∞—î –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç `ErrorDetails`:

```bash
pytest --snapshot-update
```

---

## üìú –õ–æ–≥—É–≤–∞–Ω–Ω—è

–ë–æ—Ç –≤–µ–¥–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è —É —Ç—Ä–∏ –æ–∫—Ä–µ–º—ñ —Ñ–∞–π–ª–∏ –≤ –ø–∞–ø–∫–∞—Ö `logs/mainnet/` –∞–±–æ `logs/testnet/`:
- `activity.log` ‚Äî –∑–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è —Ç–∞ —Å–∏—Å—Ç–µ–º–Ω—ñ –ø–æ–¥—ñ—ó.
- `trades.log` ‚Äî –ø–æ–¥—ñ—ó, –ø–æ–≤'—è–∑–∞–Ω—ñ –≤–∏–∫–ª—é—á–Ω–æ –∑ —Ç–æ—Ä–≥—ñ–≤–ª–µ—é.
- `performance.log` ‚Äî —â–æ–¥–µ–Ω–Ω—ñ –∑–≤—ñ—Ç–∏ –ø–æ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.

**–§–æ—Ä–º–∞—Ç –ª–æ–≥—ñ–≤:**

```
2025-11-24 10:30:45 - app - ERROR - [correlation_id: abc-123] [spot_api] TRADE_LOGIC_ERROR: LOT_SIZE filter failure
```

**–ï–ª–µ–º–µ–Ω—Ç–∏:**
- Timestamp (UTC)
- Logger name
- Log level
- Correlation ID (–¥–ª—è —Ç—Ä–∞—Å—É–≤–∞–Ω–Ω—è)
- Origin (–¥–∂–µ—Ä–µ–ª–æ –ø–æ–º–∏–ª–∫–∏)
- Category (–∫–∞—Ç–µ–≥–æ—Ä—ñ—è)
- Message (—Å–∞–Ω—ñ—Ç–∏–∑–æ–≤–∞–Ω–∏–π)

---

## ‚ùì FAQ (–ü–æ—à–∏—Ä–µ–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è)

### –ó–∞–≥–∞–ª—å–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏

**Q:** –©–æ –æ–∑–Ω–∞—á–∞—î `via_fallback=True` –≤ –ª–æ–≥–∞—Ö?  
**A:** –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –ø–æ–º–∏–ª–∫–∞ –±—É–ª–∞ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∞ –∑–∞ —ó—ó —Ç–µ–∫—Å—Ç–æ–≤–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º, –∞ –Ω–µ –∑–∞ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º –∫–æ–¥–æ–º. –¶–µ —Å–∏–≥–Ω–∞–ª –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞ –¥–æ–¥–∞—Ç–∏ —Ü–µ–π –∫–æ–¥ –ø–æ–º–∏–ª–∫–∏ –≤ `config/error_code_reference.json` –¥–ª—è –±—ñ–ª—å—à —Ç–æ—á–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏ –≤ –º–∞–π–±—É—Ç–Ω—å–æ–º—É.

**Q:** –©–æ —Ä–æ–±–∏—Ç–∏, —è–∫—â–æ –≤ –ª–æ–≥–∞—Ö –∑'—è–≤–∏–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞ `UNKNOWN_CLIENT_ERROR`?  
**A:** –¶–µ –Ω–µ–≤—ñ–¥–æ–º–∞ –¥–ª—è —Å–∏—Å—Ç–µ–º–∏ –ø–æ–º–∏–ª–∫–∞ –≤—ñ–¥ Binance. –ù–µ–æ–±—Ö—ñ–¥–Ω–æ –∑–Ω–∞–π—Ç–∏ —Ü–µ–π –∫–æ–¥ –≤ –æ—Ñ—ñ—Ü—ñ–π–Ω—ñ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó Binance, –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –π–æ–≥–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—é —Ç–∞ –¥–æ–¥–∞—Ç–∏ –¥–æ `config/error_code_reference.json`. –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –∑–∞–ø—É—Å—Ç—ñ—Ç—å –≤–∞–ª—ñ–¥–∞—Ç–æ—Ä `tools/validate_error_map.py`.

**Q:** –Ø–∫ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π –∫–æ–¥ –ø–æ–º–∏–ª–∫–∏?  
**A:**
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ `config/error_code_reference.json`.
2. –ó–Ω–∞–π–¥—ñ—Ç—å –ø–æ—Ç—Ä—ñ–±–Ω—É —Å–µ–∫—Ü—ñ—é (`spot_api` –∞–±–æ `convert_api`).
3. –î–æ–¥–∞–π—Ç–µ –Ω–æ–≤–∏–π –∑–∞–ø–∏—Å `"–∫–æ–¥_–ø–æ–º–∏–ª–∫–∏": "–Ω–∞–∑–≤–∞_–∫–∞—Ç–µ–≥–æ—Ä—ñ—ó"`.
4. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –≤–∞–ª—ñ–¥–∞—Ç–æ—Ä:

```bash
python tools/validate_error_map.py
```

### –ü–∏—Ç–∞–Ω–Ω—è –ø—Ä–æ –º–µ—Ç—Ä–∏–∫–∏

**Q:** –©–æ –æ–∑–Ω–∞—á–∞—î "Retry Success Rate: 65%"?  
**A:** –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ 65% –ø–æ–º–∏–ª–æ–∫ –±—É–ª–∏ —É—Å–ø—ñ—à–Ω–æ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω—ñ –∑–∞–≤–¥—è–∫–∏ –º–µ—Ö–∞–Ω—ñ–∑–º—É –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö —Å–ø—Ä–æ–±. –¶—ñ–ª—å–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è >70%. –Ø–∫—â–æ –≤–∞—à –ø–æ–∫–∞–∑–Ω–∏–∫ –Ω–∏–∂—á–µ - –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å –∑'—î–¥–Ω–∞–Ω–Ω—è —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è retry.

**Q:** –©–æ –æ–∑–Ω–∞—á–∞—î "Circuit Breaker Trip Rate: 8%"?  
**A:** –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ Circuit Breaker —Å–ø—Ä–∞—Ü—é–≤–∞–≤ —É 8% –≤–∏–ø–∞–¥–∫—ñ–≤ –≤—ñ–¥ –∑–∞–≥–∞–ª—å–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ç–æ—Ä–≥–æ–≤–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π. –¶—ñ–ª—å–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è <5%. –Ø–∫—â–æ –≤–∏—â–µ - –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ —è–∫—ñ—Å—Ç—å —Ç–æ—Ä–≥–æ–≤–∏—Ö —Å–∏–≥–Ω–∞–ª—ñ–≤ —Ç–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤.

**Q:** –©–æ –æ–∑–Ω–∞—á–∞—î "Fallback Rate: 25%"?  
**A:** –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ 25% –ø–æ–º–∏–ª–æ–∫ –Ω–µ –±—É–ª–∏ –∑–Ω–∞–π–¥–µ–Ω—ñ –≤ `error_code_reference.json`. –¶—ñ–ª—å–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è <20%. –î–æ–¥–∞–π—Ç–µ –Ω–æ–≤—ñ –∫–æ–¥–∏ –ø–æ–º–∏–ª–æ–∫ –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é.

**Q:** –©–æ –æ–∑–Ω–∞—á–∞—î "Critical Stops: 1"?  
**A:** –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –±–æ—Ç –∑—É–ø–∏–Ω–∏–≤—Å—è 1 —Ä–∞–∑ —á–µ—Ä–µ–∑ –∫—Ä–∏—Ç–∏—á–Ω—É –ø–æ–º–∏–ª–∫—É (`AUTH_ERROR_CRITICAL`). –¶—ñ–ª—å–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è = 0. –ù–ï–ì–ê–ô–ù–û –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–∞–ª—ñ–¥–Ω—ñ—Å—Ç—å API –∫–ª—é—á—ñ–≤.

### –û–ø–µ—Ä–∞—Ü—ñ–π–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è

**Q:** –Ø–∫ —á–∞—Å—Ç–æ —Ç—Ä–µ–±–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –º–µ—Ç—Ä–∏–∫–∏?  
**A:**
- **–©–æ—Ç–∏–∂–Ω—è:** –ó–∞–ø—É—Å–∫–∞–π—Ç–µ `python tools/calculate_metrics.py`
- **–ü—Ä–∏ –∞–Ω–æ–º–∞–ª—ñ—è—Ö:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–µ–≥–∞–π–Ω–æ —è–∫—â–æ –ø–æ–º—ñ—Ç–∏–ª–∏ –Ω–µ–∑–≤–∏—á–Ω—É –ø–æ–≤–µ–¥—ñ–Ω–∫—É
- **–ü—ñ—Å–ª—è –∑–º—ñ–Ω:** –ó–∞–≤–∂–¥–∏ –ø—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∞–±–æ –∫–æ–¥—É

**Q:** –Ø–∫ —Ä–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏ —Å–∏–º–≤–æ–ª –ø—ñ—Å–ª—è Circuit Breaker trip?  
**A:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–æ–º—É —Å–∏–º–≤–æ–ª trip-–Ω—É–≤—Å—è (–¥–∏–≤—ñ—Ç—å—Å—è –ª–æ–≥–∏)
2. –Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤–∏—Ä—ñ—à–µ–Ω–∞, –∑–∞—á–µ–∫–∞–π—Ç–µ 5 —Ö–≤–∏–ª–∏–Ω (cooldown –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∫–∏–Ω–µ—Ç—å—Å—è)
3. –Ø–∫—â–æ —Å–∏–º–≤–æ–ª –¥–æ–¥–∞–Ω–∏–π –¥–æ illiquid blacklist: `python tools/illiquid_position_manager.py --remove SYMBOL`

**Q:** RATE_LIMIT_ERROR –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –≤ Telegram - —Ü–µ –±–∞–≥?  
**A:** –ù—ñ, —Ü–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –°—Ç—Ä–∞—Ç–µ–≥—ñ—ó v10. `RATE_LIMIT_ERROR` —î –ì–õ–û–ë–ê–õ–¨–ù–û–Æ –ø–æ–º–∏–ª–∫–æ—é API (–Ω–µ –ø—Ä–∏–≤'—è–∑–∞–Ω–∞ –¥–æ —Å–∏–º–≤–æ–ª—É), —Ç–æ–º—É:
- **–ù–ï** –∑–∞–ø–∏—Å—É—î—Ç—å—Å—è –≤ Circuit Breaker
- **–ù–ï** –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –≤ Telegram (—Ç–∏–º—á–∞—Å–æ–≤–∞ –ø—Ä–æ–±–ª–µ–º–∞, —è–∫–∞ –≤–∏—Ä—ñ—à—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ retry)
- –¢—ñ–ª—å–∫–∏ –ª–æ–≥—É—î—Ç—å—Å—è —è–∫ WARNING

**Q:** –ß–æ–º—É timestamp –ù–ï —Å–∞–Ω—ñ—Ç–∏–∑—É—î—Ç—å—Å—è –≤ –ª–æ–≥–∞—Ö?  
**A:** –ó–≥—ñ–¥–Ω–æ –°—Ç—Ä–∞—Ç–µ–≥—ñ—ó v10, timestamp –Ω–µ —î —á—É—Ç–ª–∏–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏. –á—Ö –º–∞—Å–∫—É–≤–∞–Ω–Ω—è —É—Å–∫–ª–∞–¥–Ω—é—î –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫—É –ø–æ–º–∏–ª–∫–∏ `-1021` (Timestamp out of the recvWindow), —è–∫–∞ –ø–æ—Ç—Ä–µ–±—É—î —Ç–æ—á–Ω–æ–≥–æ —á–∞—Å—É –¥–ª—è –≤—ñ–¥–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è.

### –¢–µ—Ö–Ω—ñ—á–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è

**Q:** –ß–æ–º—É MAX_BACKOFF = 60 —Å–µ–∫—É–Ω–¥, –∞ –Ω–µ –±—ñ–ª—å—à–µ?  
**A:** –î–ª—è —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞ –∑–∞—Ç—Ä–∏–º–∫–∞ –ø–æ–Ω–∞–¥ 1 —Ö–≤–∏–ª–∏–Ω—É —î –∫—Ä–∏—Ç–∏—á–Ω–æ—é:
- –¶—ñ–Ω–∏ –∑–º—ñ–Ω—é—é—Ç—å—Å—è —à–≤–∏–¥–∫–æ
- –¢–æ—Ä–≥–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –≤—Ç—Ä–∞—á–∞—é—Ç—å—Å—è
- 60 —Å–µ–∫—É–Ω–¥ ‚Äî –±–∞–ª–∞–Ω—Å –º—ñ–∂ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º –Ω–∞ API —Ç–∞ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ñ—Å—Ç—é

**Q:** –Ø–∫ –ø—Ä–∞—Ü—é—î –¥–≤–æ–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ illiquid manager?  
**A:**
- **API** (`src/illiquid_manager.py`): –ü—Ä–æ–≥—Ä–∞–º–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è Circuit Breaker —Ç–∞ –≥–æ–ª–æ–≤–Ω–æ–≥–æ —Ü–∏–∫–ª—É
- **CLI** (`tools/illiquid_position_manager.py`): –†—É—á–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º
- –û–±–∏–¥–≤–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Å–ø—ñ–ª—å–Ω–∏–π —Ñ–∞–π–ª `data/testnet/illiquid_positions.json`
- Thread-safe –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑–∞–±–µ–∑–ø–µ—á—É—é—Ç—å –±–µ–∑–ø–µ–∫—É –ø—Ä–∏ concurrent –¥–æ—Å—Ç—É–ø—ñ

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ —É –≤–∞—Å –≤–∏–Ω–∏–∫–ª–∏ –ø–∏—Ç–∞–Ω–Ω—è –∞–±–æ –≤–∏ –∑–Ω–∞–π—à–ª–∏ –±–∞–≥ ‚Äî –±—É–¥—å –ª–∞—Å–∫–∞, —Å—Ç–≤–æ—Ä—ñ—Ç—å Issue —É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó GitHub.

## ‚ö†Ô∏è –í—ñ–¥–º–æ–≤–∞ –≤—ñ–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ

–¢–æ—Ä–≥—ñ–≤–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞–º–∏ –Ω–µ—Å–µ –≤–∏—Å–æ–∫—ñ —Ä–∏–∑–∏–∫–∏. –¶–µ–π –±–æ—Ç —î —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó —ñ –Ω–µ –≥–∞—Ä–∞–Ω—Ç—É—î –ø—Ä–∏–±—É—Ç–∫—É. –í—Å—ñ —Ä—ñ—à–µ–Ω–Ω—è —Ç–∞ —Ä–∏–∑–∏–∫–∏, –ø–æ–≤'—è–∑–∞–Ω—ñ –∑ –π–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º, –ª–µ–∂–∞—Ç—å –Ω–∞ –≤–∞—Å. –ó–∞–≤–∂–¥–∏ —Ç–µ—Å—Ç—É–π—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó —É Testnet –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º—É —Ä–∞—Ö—É–Ω–∫—É.